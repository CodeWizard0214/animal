<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animal Sightings</title>
    <style>
      .animal-list {
        display: flex;
        overflow: hidden;
				flex-direction: column;
      }

      .animal-card {
        flex: 0 0 100%;
        opacity: 0;
        transition: opacity 1s ease-in-out;
      }
    </style>
  </head>
  <body>
    <div class="animal-list" id="animalList"></div>
    <div id="globalSighting"></div>

    <script>
      const apiKey = "YOUR_API_KEY";
      const apiUrl = "https://api.ebird.org/v2/data/obs/geo/recent?lat=42.478572&lng=-76.451520&dist=1&catego- ry=species&includeProvisional=false&maxResults=50";
      const globalApiUrl = "YOUR_GLOBAL_API_ENDPOINT";

      // Function to fetch recent animal sightings in a specific region
      const fetchAnimalSightings = async () => {
        try {
          const response = await fetch(apiUrl, {
            headers: {
              'X-eBirdApiToken': `3pn0jnrpfjre`,
            },
          });

          const data = await response.json();
					console.log(data, "55555555555555555")

          const animalListContainer = document.getElementById("animalList");
          animalListContainer.innerHTML = "";

          data.forEach((animal) => {
            const card = document.createElement("div");
            card.className = "animal-card";
            card.innerHTML = `<img src="${animal.photo}" alt="${animal.comName}" style="width: 100%;">
                          <p>${animal.comName}</p><p>${animal.locName}</p>`;
            animalListContainer.appendChild(card);
          });

          // Trigger fading effect
          setTimeout(() => {
            document
              .querySelectorAll(".animal-card")
              .forEach((card) => (card.style.opacity = "1"));
          }, 100);
        } catch (error) {
          console.error("Error fetching animal sightings:", error);
        }
      };

      // Function to fetch a sample recent global sighting
      const fetchGlobalSighting = async () => {
        try {
          const response = await fetch(globalApiUrl, {
            headers: {
              Authorization: `Bearer ${apiKey}`,
            },
          });

          const data = await response.json();

          const globalSightingContainer =
            document.getElementById("globalSighting");
          globalSightingContainer.innerHTML = `<p>${data.text}</p>
                                          <img src="${data.illustration}" alt="Global Sighting" style="width: 100%;">`;

          // Schedule the next fetch after one minute
          setTimeout(fetchGlobalSighting, 60000);
        } catch (error) {
          console.error("Error fetching global sighting:", error);
        }
      };

      // Initial fetches
      fetchAnimalSightings();
      fetchGlobalSighting();
    </script>
  </body>
</html>
